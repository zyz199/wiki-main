---
title: 浏览器输入网址到页面展示的过程
---

浏览器从**输入网址**到**渲染页面**主要分为以下几个过程：

- URL 输入
- DNS 解析
- 建立 TCP 连接
- 发送 HTTP / HTTPS 请求（建立 TLS 连接）
- 服务器响应请求
- 浏览器解析渲染页面
- HTTP 请求结束，断开 TCP 连接

## URL 输入

在浏览器地址栏上输入 URL 后按回车，以 `https://wiki.bruceworld.top` 为例，浏览器会对该 URL 进行判断。

1. 检查输入的 URL 是否合法
2. 如果输入的 URL 合法，则判断其是否完整。如果不完整，浏览器可能会对域进行猜测，补全前缀或者后缀。
3. 如果输入的 URL 不合法，则将输入内容作为搜索条件，使用默认的搜索引擎进行搜索。

## DNS 解析

浏览器不能直接通过域名找到对应的服务器 IP 地址，所以需要进行 DNS 解析，查找到对应的 IP 地址进行访问。

DNS 解析的流程如下：

1. 在浏览器中输入 URL `https://wiki.bruceworld.top`，操作系统会检查浏览器缓存和本地的 hosts 文件中，是否有这个网址记录，有则从记录里面找到对应的 IP 地址，完成域名解析。
2. 查找本地 DNS 解析器缓存中，是否有这个网址记录，有则从记录里面找到对应的 IP 地址，完成域名解析。
3. 使用 TCP/IP 参数中设置的 DNS 服务器进行查询。如果要查询的域名包含在本地配置区域资源中，则返回解析结果，完成域名解析。
4. 检查本地 DNS 服务器是否缓存该网址记录，有则返回解析结果，完成域名解析。
5. 本地 DNS 服务器发送查询报文至根 DNS 服务器，根 DNS 服务器收到请求后，用顶级域 DNS 服务器地址进行响应。
6. 本地 DNS 服务器发送查询报文至顶级域 DNS 服务器。顶级域 DNS 服务器收到请求后，用权威 DNS 服务器地址进行响应。
7. 本地 DNS 服务器发送查询报文至权威 DNS 服务器，权威 DNS 服务器收到请求后，用 hzfe.org 的 IP 地址进行响应，完成域名解析。

查询通常遵循以上流程，从请求主机到本地 DNS 服务器的查询是递归查询，DNS 服务器获取到所需映射的查询过程是迭代查询。
