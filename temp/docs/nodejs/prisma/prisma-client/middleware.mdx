---
title: "中间件"
description: ""
tags:
  - label: "Prisma"
    permalink: "prisma"
last_update:
  date: "2022-07-30"
  author: "Bruce"
---

## 日志

添加一个计算查询数据库时间的日志中间件。

```typescript title="prisma.ts"
const prisma = new PrismaClient();

prisma.$use(async (params, next) => {
  const before = Date.now();
  const result = await next(params);
  const after = Date.now();
  console.log(
    `Query ${params.model}.${params.action} took ${after - before}ms`
  );
  return result;
});
```
